/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////	
//Aluno: João Pedro Brum Terra.
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////	
#include <assert.h>
#include <conio.h>
#include <stdio.h>
#include <stdlib.h>

void preenche_matrix(float **matrix, int tamanho);//preenche a matriz 

void Imprimir_matrix(float **matrix, int tamanho);//imprime a matriz

void D_2(float **matrix, int tamanho);//faz a diferenciação de 2 pontos

void D_3(float **matrix, int tamanho);//faz a diferenciação de 3 pontos

int main (){
	
	int	opcao_1, opcao_2, tamanho, i;
	float **matrix;
	char opcao_3;
	

	do{
		system("cls");
		
		printf("Por favor escolha uma opcao:\n1-Preencher os x's e y's.\n2-Fazer as diferencas em 2 pontos.\n3-Fazer as diferencas em 3 pontos.\n0-Finalizar.\n(so valores inteiros por favor): ");
		scanf("%d",&opcao_2);
		
		switch(opcao_2){
			case 1://Preencher a matrix com "x" e "Y".
					system("cls");
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
					if(matrix != NULL){//Caso já haja matrix.
						system("cls");
						printf("Parece que a sua matrix ja esta preenchida!\n\n");
						printf("Voce pode usar essa matriz de novo usando outros pontos e selecionando novas opcoes!\n\n");
						printf("Voce quer apagar a matriz atual?\n[Sim = s//Nao = n]:");
						scanf("%s",&opcao_3);
					}
					if(opcao_3 == 'n'){
						//system("cls");
						break;
					}
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////				
					system("cls");//Faz a alocação dinamica da matriz. 
					printf("Quantos pontos voce deseja cadastrar? (so valores inteiros por favor): ");
					scanf("%d",&tamanho);
					
					matrix = (float**)malloc(tamanho * sizeof(float *));
					for(i = 0; i < tamanho; i++)
						matrix[i] = (float*)malloc(2 * sizeof(float));	
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////		
					preenche_matrix(matrix,tamanho);//Preenche a matriz de fato.
					
					Imprimir_matrix(matrix,tamanho);
					
					printf("\nClique no enter para continuar!!!\n");
					
					getch();
					
					break;
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
			case 2://Fazer a diferenciações em 2 pontos.
			
					D_2(matrix,tamanho);
				
					break;
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////		
			case 3://Fazer a diferenciações em 3 pontos.
			
					D_3(matrix,tamanho);
				
					break;
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
			case 0://Finalizar o aplicativo!
					system("cls");
					printf("\n\n\n\n##########################################\nMuito obrigado, ate a proxima :) !!!\n##########################################\n\n\n\n");
					opcao_1 = 1;
					break;
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
			default: //Caso a pessoa selecione uma opção que não exista 
					system("cls");
					printf("Essa opcao nao existe, tente de novo!!!\n\n\n");
					break;
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
		}
	}while(opcao_1!=1);
	
	return 0;
}

void preenche_matrix(float **matrix, int tamanho){
	int i, j;
	system("cls");
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////	
	for(i = 0; i < 2; i++){
		for(j = 0; j < tamanho; j++){
			if(i == 0)
				printf("Insira x_%d : ",j+1);
				
			if(i == 1)
				printf("Insira f(x)_%d : ",j+1);
			
			scanf("%f",&matrix[j][i]);
		}
	}
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	if(matrix == NULL){
		printf("O preenchimento nao deu certo.");
		
		return;
	}
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////	
	printf("\n\nOk, deu certo!\n\n");
	
	return;
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
}
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////	

void Imprimir_matrix(float **matrix, int tamanho){
	int i, j;
	
	printf("\n");
	for(i = 0; i < 2; i++){
		for(j = 0; j < tamanho; j++){
			if(i == 0)
				printf("x_%d: %f//",j+1,matrix[j][i]);
				
			if(i == 1)
				printf("f(x)_%d: %f//",j+1,matrix[j][i]);
			
		}
		printf("\n\n");
	}
	printf("\n\n");
}
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////	


void D_2(float **matrix, int tamanho){
	
	int j, opcao_4;
	
	float Progressiva, Regressiva, Central;
	
	system("cls");
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////		
	if(matrix == NULL){
		printf("Nao tem matriz !!!");
		
		printf("\nClique no enter para continuar!!!\n");
		
		getch();
		return;
	}
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////			
	for(j = 0; j < tamanho; j++){
			printf("x_%d: %f//",j+1,matrix[j][0]);
	}
	
	printf("\n\nQual desses pontos voce deseja implementar? (so valores inteiros por favor): ");
	scanf("%d",&opcao_4);
	
	opcao_4 = opcao_4 - 1;
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////		
	printf("\n\nDIFERENCA PROGRESSIVA: ");
	if(opcao_4==tamanho-1){//Progressiva
		printf("Nao ha como fazer essa diferenca!!!");
	}else{
		Progressiva = (matrix[opcao_4+1][1]-matrix[opcao_4][1])/(matrix[opcao_4+1][0]-matrix[opcao_4][0]);
		printf("%f",Progressiva);
	}
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////		
	printf("\n\nDIFERENCA REGRESSIVA: ");
	if(opcao_4==0){//Progressiva
		printf("Nao ha como fazer essa diferenca!!!");
	}else{
		Regressiva = (matrix[opcao_4][1]-matrix[opcao_4-1][1])/(matrix[opcao_4][0]-matrix[opcao_4-1][0]);
		printf("%f",Regressiva);
	}
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////		
		printf("\n\nDIFERENCA CENTRAL ");
	if((opcao_4==0)||(opcao_4==tamanho-1)){//Progressiva
		printf("Nao ha como fazer essa diferenca!!!");
	}else{
		Central = (matrix[opcao_4+1][1]-matrix[opcao_4-1][1])/(matrix[opcao_4+1][0]-matrix[opcao_4-1][0]);
		printf("%f",Central);
	}
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////		
	printf("\n\nClique no enter para continuar!!!\n");
	
	getch();
}
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////	

void D_3(float **matrix, int tamanho){
	
	int j, opcao_4;
	
	float Progressiva, Regressiva;
	
	system("cls");
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////		
	if(matrix == NULL){
		printf("Nao tem matriz !!!");
		
		printf("\nClique no enter para continuar!!!\n");
		
		getch();
		return;
	}
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////			
	for(j = 0; j < tamanho; j++){
			printf("x_%d: %f//",j+1,matrix[j][0]);
	}
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////		
	printf("\n\nQual desses pontos voce deseja implementar? (so valores inteiros e presentes acima por favor): ");
	scanf("%d",&opcao_4);
	
	opcao_4 = opcao_4 - 1;
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////		
	printf("\n\nDIFERENCA PROGRESSIVA: ");
	if(opcao_4>=tamanho-2){//Progressiva
		printf("Nao ha como fazer essa diferenca!!!");
	}else{
		Progressiva = (-3*matrix[opcao_4][1]+4*matrix[opcao_4+1][1]-matrix[opcao_4+2][1])/(2*(matrix[opcao_4+1][0]-matrix[opcao_4][0]));
		printf("%f",Progressiva);
	}
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////		
	printf("\n\nDIFERENCA REGRESSIVA: ");
	if(opcao_4<=1){//Progressiva
		printf("Nao ha como fazer essa diferenca!!!");
	}else{
		Regressiva = (3*matrix[opcao_4][1]-4*matrix[opcao_4-1][1]+matrix[opcao_4-2][1])/(2*(matrix[opcao_4][0]-matrix[opcao_4-1][0]));
		printf("%f",Regressiva);
	}
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////		
	printf("\n\nClique no enter para continuar!!!\n");
	
	getch();
}
